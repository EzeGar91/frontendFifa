<div class="dashboard-container">
  <!-- Header del Dashboard -->
  <div class="dashboard-header">
    <h1>Dashboard de Jugadores</h1>
    <p class="subtitle">Busca y filtra jugadores por nombre, club y posici√≥n</p>
  </div>

  <!-- Panel de B√∫squeda -->
  <div class="search-panel">
    <form [formGroup]="searchForm" class="search-form">
      <div class="form-row">
        <div class="form-group">
          <label for="name">Nombre del Jugador</label>
          <input 
            id="name"
            type="text" 
            formControlName="name" 
            placeholder="Ej: Lionel Messi"
            class="form-input"
          />
        </div>

        <div class="form-group">
          <label for="club">Club</label>
          <input 
            id="club"
            type="text" 
            formControlName="club" 
            placeholder="Ej: FC Barcelona"
            class="form-input"
          />
        </div>

        <div class="form-group">
          <label for="position">Posici√≥n</label>
          <select 
            id="position"
            formControlName="position" 
            class="form-select"
          >
            <option value="">Todas las posiciones</option>
            <option *ngFor="let position of positions" [value]="position">
              {{ position }}
            </option>
          </select>
        </div>
      </div>

      <div class="form-actions">
        <button 
          type="button" 
          (click)="clearFilters()" 
          class="btn btn-secondary"
        >
          Limpiar Filtros
        </button>
        <button 
          type="button" 
          (click)="downloadCSV()" 
          class="btn btn-primary"
          [disabled]="isLoading"
        >
          <i class="download-icon">üì•</i>
          Descargar CSV
        </button>
      </div>
    </form>
  </div>

  <!-- Estad√≠sticas -->
  <div class="stats-panel">
    <div class="stat-card">
      <div class="stat-number">{{ totalResults }}</div>
      <div class="stat-label">Jugadores encontrados</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">{{ players.length }}</div>
      <div class="stat-label">Total de jugadores</div>
    </div>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Buscando jugadores...</p>
  </div>

  <!-- Lista de Jugadores -->
  <div *ngIf="!isLoading" class="players-container">
    <div *ngIf="filteredPlayers.length === 0" class="no-results">
      <div class="no-results-icon">üîç</div>
      <h3>No se encontraron jugadores</h3>
      <p>Intenta ajustar los filtros de b√∫squeda</p>
    </div>

    <div *ngIf="filteredPlayers.length > 0" class="players-grid">
      <div 
        *ngFor="let player of displayedPlayers" 
        class="player-card"
      >
        <div class="player-header">
          <h3 class="player-name">{{ player.long_name }}</h3>
          <div class="player-overall">{{ player.overall }}</div>
        </div>
        
        <div class="player-details">
          <div class="player-info">
            <span class="info-label">Edad:</span>
            <span class="info-value">{{ player.age }} a√±os</span>
          </div>
          
          <div class="player-info">
            <span class="info-label">Club:</span>
            <span class="info-value">{{ player.club_name }}</span>
          </div>
          
          <div class="player-info">
            <span class="info-label">Nacionalidad:</span>
            <span class="info-value">{{ player.nationality_name }}</span>
          </div>
          
          <div class="player-info">
            <span class="info-label">Posici√≥n:</span>
            <span 
              class="info-value position-badge"
              [ngClass]="getPositionClass(player.player_positions)"
            >
              {{ player.player_positions }}
            </span>
          </div>
          
          <div class="player-info" *ngIf="player.potential">
            <span class="info-label">Potencial:</span>
            <span class="info-value">{{ player.potential }}</span>
          </div>
          
          <div class="player-info" *ngIf="player.value_eur">
            <span class="info-label">Valor:</span>
            <span class="info-value">{{ player.value_eur | currency:'EUR':'symbol':'1.0-0' }}</span>
          </div>
          
          <div class="player-info" *ngIf="player.height_cm">
            <span class="info-label">Altura:</span>
            <span class="info-value">{{ player.height_cm }} cm</span>
          </div>
          
          <div class="player-info" *ngIf="player.preferred_foot">
            <span class="info-label">Pie preferido:</span>
            <span class="info-value">{{ player.preferred_foot }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Controles de Paginaci√≥n -->
    <div *ngIf="filteredPlayers.length > pageSize" class="pagination-container">
      <div class="pagination-info">
        Mostrando {{ (currentPage - 1) * pageSize + 1 }} - {{ getMinValue(currentPage * pageSize, filteredPlayers.length) }} de {{ filteredPlayers.length }} jugadores
      </div>
      
      <div class="pagination-controls">
        <button 
          (click)="previousPage()" 
          [disabled]="currentPage === 1"
          class="pagination-btn"
        >
          ‚Üê Anterior
        </button>
        
        <div class="page-numbers">
          <button 
            *ngFor="let page of getPageNumbers()"
            (click)="goToPage(page)"
            [class.active]="page === currentPage"
            class="page-btn"
          >
            {{ page }}
          </button>
        </div>
        
        <button 
          (click)="nextPage()" 
          [disabled]="currentPage === totalPages"
          class="pagination-btn"
        >
          Siguiente ‚Üí
        </button>
      </div>
    </div>
  </div>
</div>
